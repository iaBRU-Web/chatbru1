<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Brumessenger | Chatbru 1</title>
    <script src="https://cdn.ably.com/lib/ably.min-1.js"></script>
    
</head>
<body>

<div class="app">
    <div class="head">
        <div class="logo-box">
            <div class="logo-b">B</div>
            <strong>Chatbru 1</strong>
        </div>
        <button onclick="Notification.requestPermission()" style="cursor:pointer; border:none; background:none; font-size:20px;">üîî</button>
    </div>

    <div id="log">
        </div>

    <div class="ad-box">
        <span style="color:#0f0">BRU@REALSCAN:~$ nmap -sV --script vuln *</span><br>
        <b>üîç REAL NMAP + OpenVAS Scanner</b><br>
        <a href="https://hostedscan.com/?ref=kigalihacker" target="_blank">
            [ EXECUTE ] ‚Üí Free Pro Vulnerability Scan
        </a>
    </div>

    <div class="foot">
        <input type="text" id="mIn" placeholder="Type a message..." autocomplete="off">
        <button id="sendBtn">‚û§</button>
    </div>
    
    <div class="credits">
        Special thanks to Ineza Aime Bruno | Created by Ineza Aime Bruno<br>
        @NO COPYRIGHT | @All rights reserved 2026
    </div>
</div>
    <style>
        :root { 
            --p: #0084ff; 
            --bg: #f0f2f5; 
            --msg-them: #e4e6eb;
        }

        /* Base Reset */
        * { 
            box-sizing: border-box; 
            margin: 0; 
            padding: 0; 
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; 
            touch-action: manipulation;
        }

        body { 
            background: var(--bg); 
            height: 100dvh; 
            width: 100vw; 
            display: flex; 
            justify-content: center; 
            align-items: center; 
            overflow: hidden;
            position: fixed;
        }

        /* Layout Container */
        .app { 
            width: 100%; 
            max-width: 500px; 
            height: 100%; 
            background: white; 
            display: flex; 
            flex-direction: column; 
            box-shadow: 0 12px 28px rgba(0,0,0,0.12);
        }

        @media (min-width: 600px) {
            .app {
                height: 90vh;
                border-radius: 20px;
                overflow: hidden;
            }
        }

        /* Header Styling */
        .head { 
            padding: 16px; 
            border-bottom: 1px solid #eee; 
            display: flex; 
            justify-content: space-between; 
            align-items: center; 
            background: #fff;
            z-index: 10;
        }

        .logo-box { display: flex; align-items: center; gap: 12px; }
        .logo-b { 
            background: var(--p); 
            color: white; 
            width: 36px; 
            height: 36px; 
            border-radius: 10px; 
            display: flex; 
            align-items: center; 
            justify-content: center; 
            font-weight: bold; 
            font-size: 20px; 
        }

        /* Chat Log Area */
        #log { 
            flex: 1; 
            padding: 20px; 
            overflow-y: auto; 
            display: flex; 
            flex-direction: column; 
            gap: 14px; 
            background: #f9fafb;
            scroll-behavior: smooth;
            -webkit-overflow-scrolling: touch;
        }

        /* Message Bubbles */
        .msg { 
            max-width: 80%; 
            padding: 12px 16px; 
            border-radius: 20px; 
            font-size: 15px; 
            line-height: 1.5; 
            word-wrap: break-word; 
            position: relative;
            animation: slideUp 0.3s ease;
        }

        @keyframes slideUp {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .u1 { 
            align-self: flex-end; 
            background: var(--p); 
            color: white; 
            border-bottom-right-radius: 4px; 
        }

        .u2 { 
            align-self: flex-start; 
            background: var(--msg-them); 
            color: #050505; 
            border-bottom-left-radius: 4px; 
        }

        /* Advertisement Section */
        .ad-box {
            background: black;
            color: lime;
            padding: 15px;
            margin: 10px;
            border: 2px solid lime;
            font-family: 'Courier New', monospace;
            border-radius: 8px;
            font-size: 13px;
        }

        .ad-box a {
            color: lime;
            font-weight: bold;
            text-decoration: none;
            display: block;
            margin-top: 8px;
        }

        /* Input Area */
        .foot { 
            padding: 15px; 
            border-top: 1px solid #eee; 
            display: flex; 
            gap: 10px; 
            background: white;
            padding-bottom: calc(15px + env(safe-area-inset-bottom));
        }

        #mIn { 
            flex: 1; 
            border: none; 
            background: #f0f2f5; 
            padding: 12px 20px; 
            border-radius: 25px; 
            outline: none; 
            font-size: 16px;
        }

        #sendBtn { 
            background: var(--p); 
            color: white; 
            border: none; 
            width: 48px; 
            height: 48px; 
            border-radius: 50%; 
            cursor: pointer; 
            font-size: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: transform 0.2s;
        }

        #sendBtn:active { transform: scale(0.9); }

        .credits { 
            padding-bottom: 8px; 
            font-size: 10px; 
            color: #aaa; 
            text-align: center; 
        }
    </style>

<script>
    // Hardcoded API Key
    const KEY = 'UNMYag.VcluoA:gkmv1VpeHWmrC7W0NJXRcdQZaRAJP0Z5uAj_dooMjuc';
    const ably = new Ably.Realtime({ key: KEY, clientId: 'u1' });
    const channel = ably.channels.get('BRUCHANNEL');
    
    const log = document.getElementById('log');
    const input = document.getElementById('mIn');
    const btn = document.getElementById('sendBtn');

    function addMsg(sender, text) {
        const d = document.createElement('div');
        d.className = `msg ${sender}`;
        d.innerText = text;
        log.appendChild(d);
        
        // Auto-scroll logic
        log.scrollTop = log.scrollHeight;
        
        // Notifications for Mobile
        if (sender === 'u2' && document.hidden) {
            new Notification('Brumessenger', { body: text });
        }
    }

    // Subscribe to the shared channel
    channel.subscribe('chat', (m) => {
        addMsg(m.clientId, m.data.text);
    });

    const sendMessage = () => {
        const val = input.value.trim();
        if(!val) return;
        
        channel.publish('chat', { text: val });
        input.value = '';
        input.focus(); // Keep mobile keyboard active
    };

    btn.onclick = sendMessage;
    input.onkeydown = (e) => { if(e.key === 'Enter') sendMessage(); };

    // Fetch history on load
    channel.history((err, res) => {
        if (res) {
            res.items.reverse().forEach(m => addMsg(m.clientId, m.data.text));
        }
    });
</script>

</body>
</html>
